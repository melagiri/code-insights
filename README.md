# Code Insights CLI

Sync your AI coding session history to Firebase for analysis and insights.

## How It Works

```
Your Machine                     Hosted Dashboard
┌────────────────┐               ┌─────────────────────┐
│ ~/.claude/     │               │ code-insights.ai    │
│   projects/    │               │                     │
│   (JSONL)      │               │ • Chat conversation │
└───────┬────────┘               │ • LLM insights      │
        │                        │ • Analytics         │
        ▼                        └──────────┬──────────┘
┌────────────────┐                          │
│ CLI (sync)     │                          │
└───────┬────────┘                          │
        │                                   │
        ▼                                   ▼
┌─────────────────────────────────────────────────┐
│           Your Firebase (Firestore)             │
│                                                 │
│  • projects   • sessions   • messages           │
│  • insights (generated by dashboard)            │
└─────────────────────────────────────────────────┘
```

This CLI syncs your Claude Code sessions to your own Firebase Firestore. The web dashboard at [code-insights.ai](https://code-insights.ai) reads your data and provides visualization, chat views, and LLM-powered insight generation.

## Installation

```bash
npm install -g code-insights
```

Or with pnpm:
```bash
pnpm add -g code-insights
```

## Quick Start

### 1. Set up Firebase
- Create a Firebase project at [console.firebase.google.com](https://console.firebase.google.com)
- Enable Firestore Database
- Generate a service account key (Project Settings → Service Accounts → Generate New Private Key)

### 2. Configure the CLI
```bash
code-insights init
```

You'll be prompted for your Firebase service account credentials (Project ID, Client Email, Private Key).

### 3. Sync your sessions
```bash
code-insights sync
```

### 4. View on the dashboard
Visit [https://code-insights.ai](https://code-insights.ai) and enter your Firebase web credentials to view and analyze your sessions.

## Commands

```bash
code-insights init              # Configure Firebase credentials
code-insights sync              # Sync sessions to Firestore
code-insights sync --force      # Re-sync all sessions
code-insights sync --dry-run    # Preview what would be synced
code-insights sync --quiet      # Suppress output (for automation)
code-insights status            # Show configuration and sync status
```

## Data Privacy

**Bring Your Own Firebase (BYOF)** - All your session data stays in your own Firebase project. The CLI only uploads to credentials you provide. The web dashboard accesses your Firestore using credentials you enter (stored in your browser's localStorage).

| What | Where | Who Controls |
|------|-------|--------------|
| Session data | Your Firebase | You |
| Messages | Your Firebase | You |
| Generated insights | Your Firebase | You |

## Multi-Device Support

Sync from multiple machines to the same Firebase project:
- Project IDs are derived from git remote URLs (stable across devices)
- Falls back to path-based hashing when no git remote exists
- Each session tracks device metadata for traceability

## Requirements

- Node.js 18+
- Firebase project with Firestore enabled
- Claude Code installed with session history (`~/.claude/projects/`)

## License

MIT License - see [LICENSE](LICENSE) for details.
